### 基于MoveIt！的机械臂运动规划实现

运动规划：确保机械臂在工作过程中不与工作人员、机器人自身或其他设备发生碰撞。

路径规划：是机械臂运动规划问题中的核心问题，目标是在环境空间中寻找一条从机器人起始状态到目标状态的无碰路径。

环境空间：是一个三维的欧几里得空间，在该空间内定义了所有物理对象的几何信息，这些物理对象的集合被成为障碍物空间。



一、OMPL

开源运动规划库（Open Motion Planning Library, OMPL）是由Rice大学的Kavraki实验室开发的专用于基于采样运动规划的一个C++语言开源库。OMPL不仅包含了许多主流的采样规划算法，如PRM，RRT，KPIECE（Kinodynamic Planning by Interior-Exterior Cell Exploration）等，而且以一种期望用户以最小输入即可解决各种复杂运动规划问题的方式进行设计。OMPL将运动规划问题从机器人学和人工智能领域的研究中进行抽象后，认为该问题可以单纯地看作是在连续空间内的搜索问题。

基于采样运动规划：基本思想是使用图结构近似搜索空间的连续性，然后对搜索空间进行采样病并择样本点作为近似图的顶点，近似图内各顶点之间的连线表示有效路径。

OMPL局限：只关注于运动规划算法在复杂约束下的高维连续空间的通用性搜索的实现，不包含机器人本体或其工作空间的表述，也不包含碰撞检测器或任何可视化功能。OMPL将状态有效性的定义权留给用户或其他集成OMPL的软件，为他们留出巨大的自由设计的空间。

OMPL对目前主流的采样算法进行研究后提出了五个有关运动规划问题的核心概念：

* 状态空间：状态空间（构型空间）内的点表征着规划系统的特点状态。对于一个自由运动的刚体，其状态空间由三个评议状态和三个旋转状态构成；而对于具有n个转动关键关节的机械臂，状态空间可被表征为一个n维的圆环面。
* 控制空间：控制空间表征了控制量空间的参数化。控制空间适用于动力学系统，对于几何层面的规划，不考虑控制量问题。
* 采样器：采样器用于从状态空间内生产不同的状态。对于基于控制的二系统，使用独立的控制量采样机对控制空间进行采样。
* 状态有效性检测器：是一个用于区分状态空间的有效部分和无效部分的算法程序。例如，使用状态有效性检测器进行避障检测，以及速度和加速度超限检测等。
* 局部规划器：在几何层面进行规划时，局部规划期用于进行状态点之间的插补。

下图为OMPL核心运动规划概念的各关键类及相互之间继承关系的架构：![](/assets/Screenshot from 2017-06-20 11:00:05.png)

---

二、基于MoveIt的机械臂运动规划



---

OMPL：[http://ompl.kavrakilab.org/OMPL\_Primer.pdf](http://ompl.kavrakilab.org/OMPL_Primer.pdf)

